<html>
  <head>
    <title>JavaScript Test Program</title>
    <meta charset="UTF-8"/>
  </head>
  <body>
    <h1>My Test Web Page</h1>
<input type="file" id="fileinput" />
<script>
  function readSingleFile(evt) {
    var f = evt.target.files[0]; 
    if (f) {
      var r = new FileReader();
      r.onload = function(e) { 
          var contents = e.target.result;
          document.write("File Uploaded! <br />" + "name: " + f.name + "<br />" + "content: " + contents + "<br />" + "type: " + f.type + "<br />" + "size: " + f.size + " bytes <br />");

          console.log(contents);
          let array = {};
        
          var lines = contents.split("\n"), output = [];
          
          let keys = lines[0].split(',');
          console.log(keys);
          // want to have type : { {Details: '4835...'}, {Particulars: ''} }
          
          for (var i = 1; i < lines.length; i++) {
            console.log('lines');
            console.log(lines[i].split(','));
            console.log(lines[i].split(',') !== [""]);
            console.log(lines[i].split(',') === [""]);
            if (lines[i].split(',') !== [""]) {
              let temp = {};
              let temp_lines = lines[i].split(',');

              for (var j = 0; j < temp_lines.length; j++) {
                console.log(keys[j]);
                temp[keys[j]] = temp_lines[j];  
              }
              console.log(temp);

              //array[i] = lines[i].split(',');
              if (lines[i].includes('Transfer')) {
                console.log('only transfer');    
              }
              else {
                output.push("<tr><td>" + lines[i].split(",").join("</td><td>") + "</td></tr>");
              }
            }
          }
        
          console.log(array);
        
          output = "<table>" + output.join("") + "</table>";
          document.write(output);
     }
      r.readAsText(f);
      document.write(output);
    } else { 
      alert("Failed to load file");
    }
  }
  document.getElementById('fileinput').addEventListener('change', readSingleFile);
</script>
  </body>
</html>
